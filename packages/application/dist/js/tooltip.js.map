{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../tooltip/src/inversify.config.ts","webpack:///../tooltip/src/types.ts","webpack:///../tooltip/src/tooltip/createCardTooltip.ts","webpack:///../tooltip/src/tooltip/bindReferenceLink.ts","webpack:////home/rilling/workspace/yugioh-deck-tool/node_modules/lodash-es/now.js","webpack:////home/rilling/workspace/yugioh-deck-tool/node_modules/lodash-es/debounce.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getWindow.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/instanceOf.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getNodeName.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getParentNode.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/isTableElement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/enums.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/orderModifiers.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/debounce.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/mergeByName.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/index.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/eventListeners.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getBasePlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getVariation.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/computeOffsets.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/popperOffsets.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/computeStyles.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/applyStyles.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/offset.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getOppositePlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getBorders.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getDecorations.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/contains.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/rectToClientRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getFreshSideObject.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/mergePaddingObject.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/expandToHashMap.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/detectOverflow.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/flip.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/getAltAxis.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/utils/within.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/preventOverflow.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/arrow.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/modifiers/hide.js","webpack:///../tooltip/node_modules/@popperjs/core/lib/popper.js","webpack:///../tooltip/src/tooltip/bindTooltip.ts","webpack:///../tooltip/src/main.ts","webpack:///../tooltip/node_modules/reflect-metadata/Reflect.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","tooltipContainer","createChild","TOOLTIP_TYPES","assign","priceService","PriceService","createElement","classes","type","element","document","forEach","className","classList","add","createDiv","children","child","appendChild","createUl","createLi","textContent","createSpan","createParagraph","createImg","src","createLoadingTooltip","createErrorTooltip","message","createMonsterStats","card","statsChildren","statImage","atk","def","linkRating","createSubType","subTypeChildren","group","MONSTER","encodeURIComponent","attribute","subType","createPrice","priceItems","vendor","lookupResult","getPrice","missing","priceItem","id","formatPrice","price","currency","createDescription","description","split","map","paragraph","createCardDetailsCol","primaryDetails","banlist","TCG","SKILL","level","linkMarkers","join","createCardImageCol","cardImage","image","url","createCardTooltip","cardService","CardService","browserSupportsTouch","navigator","maxTouchPoints","isHrefBlank","target","href","attributes","getNamedItem","bindReferenceLink","getReferenceLink","now","Date","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeMin","min","debounce","func","wait","options","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","leadingEdge","setTimeout","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","clearTimeout","flush","debounced","isInvoking","arguments","this","toNumber","isObject","getBoundingClientRect","rect","width","height","top","right","bottom","left","x","y","getWindow","node","toString","ownerDocument","defaultView","getWindowScroll","win","scrollLeft","pageXOffset","scrollTop","pageYOffset","isElement","OwnElement","Element","isHTMLElement","HTMLElement","getHTMLElementScroll","getNodeScroll","getNodeName","nodeName","toLowerCase","getDocumentElement","documentElement","getWindowScrollBarX","getComputedStyle","isScrollParent","_getComputedStyle","overflow","overflowX","overflowY","test","getCompositeRect","elementOrVirtualElement","offsetParent","isFixed","scroll","offsets","clientLeft","clientTop","getLayoutRect","offsetLeft","offsetTop","offsetWidth","offsetHeight","getParentNode","assignedSlot","parentNode","host","getScrollParent","indexOf","body","listScrollParents","list","scrollParent","isBody","concat","visualViewport","updatedList","isTableElement","getTrueOffsetParent","position","getOffsetParent","auto","basePlacements","start","end","viewport","variationPlacements","reduce","acc","placement","beforeRead","read","afterRead","beforeMain","afterMain","beforeWrite","write","afterWrite","modifierPhases","order","modifiers","Map","visited","Set","sort","modifier","requires","requiresIfExists","dep","has","depModifier","set","orderModifiers","orderedModifiers","phase","filter","fn","pending","Promise","resolve","then","mergeByName","merged","current","existing","keys","DEFAULT_OPTIONS","strategy","areValidElements","_len","Array","_key","some","popperGenerator","generatorOptions","_generatorOptions","_generatorOptions$def","defaultModifiers","_generatorOptions$def2","defaultOptions","reference","popper","state","modifiersData","elements","styles","effectCleanupFns","isDestroyed","instance","setOptions","cleanupModifierEffects","scrollParents","contextElement","enabled","runModifierEffects","update","forceUpdate","_state$elements","rects","reset","index","_state$orderedModifie","_state$orderedModifie2","_options","destroy","_ref3","_ref3$options","effect","cleanupFn","noopFn","onFirstUpdate","passive","_ref","_options$scroll","_options$resize","resize","addEventListener","removeEventListener","getBasePlacement","getVariation","getMainAxisFromPlacement","computeOffsets","basePlacement","variation","commonX","commonY","mainAxis","len","floor","ceil","unsetSides","roundOffsets","dpr","devicePixelRatio","round","mapToStyles","_ref2","_Object$assign2","popperRect","gpuAcceleration","adaptive","_roundOffsets","hasX","hasY","sideX","sideY","clientHeight","clientWidth","_Object$assign","commonStyles","transform","computeStyles","_options$gpuAccelerat","_options$adaptive","popperOffsets","arrow","applyStyles","style","removeAttribute","setAttribute","initialStyles","margin","styleProperties","distanceAndSkiddingToXY","offset","invertDistance","skidding","distance","_options$offset","_data$state$placement","hash","getOppositePlacement","replace","matched","getOppositeVariationPlacement","getViewportRect","innerWidth","innerHeight","platform","getDocumentRect","winScroll","documentRect","cssValue","parseFloat","getBorders","computedStyle","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","getDecorations","borders","isHTML","winScrollBarX","contains","parent","isShadow","Boolean","getRootNode","next","isSameNode","rectToClientRect","getClientRectFromMixedType","clippingParent","getClippingParents","clippingParents","canEscapeClipping","clipperElement","getClippingRect","boundary","rootBoundary","mainClippingParents","firstClippingParent","clippingRect","accRect","decorations","getFreshSideObject","mergePaddingObject","paddingObject","expandToHashMap","hashMap","detectOverflow","_options$placement","_options$boundary","_options$rootBoundary","_options$elementConte","elementContext","_options$altBoundary","altBoundary","_options$padding","padding","altContext","referenceElement","clippingClientRect","referenceClientRect","popperClientRect","elementClientRect","overflowOffsets","offsetData","multiply","axis","computeAutoPlacement","flipVariations","_options$allowedAutoP","allowedAutoPlacements","placements","overflows","a","b","getExpandedFallbackPlacements","oppositePlacement","flip","_skip","_options$mainAxis","checkMainAxis","_options$altAxis","altAxis","checkAltAxis","specifiedFallbackPlacements","fallbackPlacements","_options$flipVariatio","preferredPlacement","isBasePlacement","referenceRect","checksMap","makeFallbackChecks","firstFittingPlacement","_basePlacement","isStartVariation","isVertical","mainVariationSide","altVariationSide","checks","every","check","numberOfChecks","_loop","_i","fittingPlacement","find","_ret","getAltAxis","within","preventOverflow","_options$tether","tether","_options$tetherOffset","tetherOffset","tetherOffsetValue","mainSide","altSide","additive","minLen","maxLen","arrowElement","arrowRect","arrowPaddingObject","arrowPaddingMin","arrowPaddingMax","arrowLen","minOffset","maxOffset","arrowOffsetParent","clientOffset","offsetModifierValue","tetherMin","tetherMax","preventedOffset","_mainSide","_altSide","_offset","_min","_max","_preventedOffset","_state$modifiersData$","minProp","maxProp","endDiff","startDiff","clientSize","centerToReference","center","axisProp","centerOffset","_options$element","querySelector","getSideOffsets","preventedOffsets","isAnySideFullyClipped","side","hide","referenceOverflow","popperAltOverflow","referenceClippingOffsets","popperEscapeOffsets","isReferenceHidden","hasPopperEscaped","eventListeners","cardDatabase","CardDatabase","cardDataLoaderService","CardDataLoaderService","logger","getLogger","CardTooltip","constructor","tooltipContainerElement","tooltipElement","popperInstance","close","remove","open","tooltip","createPopper","loadCard","async","resolvedCardKey","prepareCard","cardKey","FindCardBy","NAME","hasCard","getCard","PASSCODE","Error","bindTooltipHandlers","context","openTooltip","trace","HTMLAnchorElement","updateViews","catch","e","warn","error","mouseOverHandler","event","dataset","mouseOutHandler","TOOLTIP_CONTAINER_ID","getElementById","debug","Reflect","factory","root","global","self","Function","exporter","makeExporter","previous","configurable","writable","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","supportsProto","__proto__","downLevel","HashMap","MakeDictionary","functionPrototype","getPrototypeOf","usePolyfill","process","_Map","entries","CreateMapPolyfill","_Set","CreateSetPolyfill","_WeakMap","WeakMap","CreateWeakMapPolyfill","Metadata","decorate","decorators","propertyKey","IsUndefined","IsArray","IsConstructor","DecorateConstructor","IsObject","IsNull","ToPropertyKey","DecorateProperty","metadata","metadataKey","metadataValue","decorator","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","getMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","delete","size","targetMetadata","decorated","descriptor","O","P","Create","MetadataKey","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","ownKeys_1","hasKey","_a","parentKeys_1","keysObj","GetIterator","k","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","IsSymbol","ToPrimitive","input","PreferredType","hint","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","valueOf","toString_2","argument","ToString","isArray","V","obj","method","iterResult","done","f","proto","prototypeProto","cacheSentinel","arraySentinel","MapIterator","values","selector","_index","_keys","_values","_selector","throw","return","_cacheKey","_cacheIndex","_find","clear","getKey","getValue","getEntry","insert","_","_map","UUID_SIZE","rootKey","CreateUniqueKey","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","random","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","byte","__"],"mappings":"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","file":"js/tooltip.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"tooltip\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1,\"common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { container } from \"yugioh-deck-tool-core/src/main\";\n\nconst tooltipContainer = container.createChild();\n\nexport { tooltipContainer };\n","import { TYPES } from \"yugioh-deck-tool-core/src/main\";\n\nconst TOOLTIP_TYPES = Object.assign({}, TYPES);\n\nexport { TOOLTIP_TYPES };\n","import {\n    Card,\n    CardTypeGroup,\n    DEFAULT_VENDOR_ARR,\n    Format,\n    PriceService,\n} from \"yugioh-deck-tool-core/src/main\";\nimport { tooltipContainer } from \"../inversify.config\";\nimport { TOOLTIP_TYPES } from \"../types\";\n\nconst priceService = tooltipContainer.get<PriceService>(\n    TOOLTIP_TYPES.PriceService\n);\n\nconst createElement = (classes: string[], type: string): HTMLElement => {\n    const element = document.createElement(type);\n    classes.forEach((className) => element.classList.add(className));\n    return element;\n};\n\nconst createDiv = (\n    classes: string[],\n    children: HTMLElement[]\n): HTMLDivElement => {\n    const element = createElement(classes, \"div\") as HTMLDivElement;\n    children.forEach((child) => element.appendChild(child));\n    return element;\n};\n\nconst createUl = (\n    classes: string[],\n    children: HTMLElement[]\n): HTMLUListElement => {\n    const element = createElement(classes, \"ul\") as HTMLUListElement;\n    children.forEach((child) => element.appendChild(child));\n    return element;\n};\n\nconst createLi = (classes: string[], textContent: string): HTMLLIElement => {\n    const element = createElement(classes, \"li\") as HTMLLIElement;\n    element.textContent = textContent;\n    return element;\n};\n\nconst createSpan = (\n    classes: string[],\n    textContent: string\n): HTMLSpanElement => {\n    const element = createElement(classes, \"span\") as HTMLSpanElement;\n    element.textContent = textContent;\n    return element;\n};\n\nconst createParagraph = (\n    classes: string[],\n    textContent: string\n): HTMLSpanElement => {\n    const element = createElement(classes, \"p\") as HTMLParagraphElement;\n    element.textContent = textContent;\n    return element;\n};\n\nconst createImg = (classes: string[], src: string): HTMLImageElement => {\n    const element = createElement(classes, \"img\") as HTMLImageElement;\n    element.src = src;\n    return element;\n};\n\nexport const createLoadingTooltip = (): HTMLElement =>\n    createDiv(\n        [\"card-tooltip__content\", \"card-tooltip__content--loading\"],\n        [\n            createDiv(\n                [\"card-tooltip__loading\"],\n                [\n                    createSpan([\"fas\", \"fa-spinner\", \"fa-spin\"], \"\"),\n                    createSpan([], \"Loading...\"),\n                ]\n            ),\n        ]\n    );\n\nexport const createErrorTooltip = (message: string): HTMLElement =>\n    createDiv(\n        [\"card-tooltip__content\", \"card-tooltip__content--error\"],\n        [\n            createDiv(\n                [\"card-tooltip__error\"],\n                [createSpan([\"fas\", \"fa-times\"], \"\"), createSpan([], message)]\n            ),\n        ]\n    );\n\nconst createMonsterStats = (card: Card): HTMLElement => {\n    const statsChildren: HTMLElement[] = [];\n    const statImage = createImg(\n        [],\n        \"https://ygoprodeck.com/wp-content/uploads/2017/01/atk.png\"\n    );\n    statsChildren.push(statImage);\n    if (card.atk != null) {\n        statsChildren.push(createSpan([], `ATK/ ${card.atk}`));\n    }\n    if (card.def != null) {\n        statsChildren.push(createSpan([], `DEF/ ${card.def}`));\n    } else if (card.linkRating != null) {\n        statsChildren.push(createSpan([], `LINK-${card.linkRating}`));\n    }\n    return createDiv([\"card-tooltip__stats\"], statsChildren);\n};\n\nconst createSubType = (card: Card): HTMLElement => {\n    const subTypeChildren: HTMLElement[] = [];\n\n    if (card.type.group === CardTypeGroup.MONSTER) {\n        subTypeChildren.push(\n            createImg(\n                [],\n                `https://ygoprodeck.com/pics/${encodeURIComponent(\n                    card.attribute!\n                )}.jpg`\n            )\n        );\n        subTypeChildren.push(createSpan([], `Attribute: ${card.attribute!}`));\n\n        subTypeChildren.push(\n            createImg(\n                [],\n                `https://ygoprodeck.com/pics/${encodeURIComponent(\n                    card.subType\n                )}.png`\n            )\n        );\n        subTypeChildren.push(createSpan([], `Type: ${card.subType}`));\n    } else {\n        subTypeChildren.push(\n            createImg(\n                [],\n                `https://ygoprodeck.com/pics/icons/${encodeURIComponent(\n                    card.subType\n                )}.png`\n            )\n        );\n        subTypeChildren.push(createSpan([], `Type: ${card.subType}`));\n    }\n\n    return createDiv([\"card-tooltip__subtype\"], subTypeChildren);\n};\n\nconst createPrice = (card: Card): HTMLElement => {\n    const priceItems: HTMLElement[] = [];\n    for (const vendor of DEFAULT_VENDOR_ARR) {\n        const lookupResult = priceService.getPrice([card], vendor, null);\n        if (lookupResult.missing.length > 0) {\n            continue;\n        }\n        const priceItem = createLi(\n            [\n                \"card-tooltip__price__vendor\",\n                `card-tooltip__price__vendor--${vendor.id}`,\n            ],\n            `${vendor.name}: ${priceService.formatPrice(\n                lookupResult.price,\n                vendor.currency\n            )}`\n        );\n        priceItems.push(priceItem);\n    }\n    return createUl([\"card-tooltip__price\"], priceItems);\n};\n\nconst createDescription = (card: Card): HTMLElement =>\n    createDiv(\n        [\"card-tooltip__description\"],\n        card.description\n            .split(\"\\n\")\n            .map((paragraph) => createParagraph([], paragraph))\n    );\n\nconst createCardDetailsCol = (card: Card): HTMLElement => {\n    const children: HTMLElement[] = [];\n\n    const primaryDetails = createDiv(\n        [\"card-tooltip__details\"],\n        [\n            createImg(\n                [],\n                `https://ygoprodeck.com/pics/icons/${encodeURIComponent(\n                    card.type.name\n                )}.jpg`\n            ),\n            createSpan([\"card-tooltip__name\"], card.name),\n            createImg(\n                [],\n                `https://ygoprodeck.com/pics/icons/${encodeURIComponent(\n                    card.banlist[Format.TCG].name\n                )}.png`\n            ),\n        ]\n    );\n    children.push(primaryDetails);\n\n    if (card.type.group === CardTypeGroup.MONSTER) {\n        children.push(createMonsterStats(card));\n    }\n\n    if (card.type.group !== CardTypeGroup.SKILL) {\n        children.push(createSubType(card));\n    }\n\n    if (card.type.group === CardTypeGroup.MONSTER) {\n        if (card.level != null) {\n            const level = createDiv(\n                [\"card-tooltip__level\"],\n                [\n                    createImg(\n                        [],\n                        \"https://ygoprodeck.com/wp-content/uploads/2017/01/level.png\"\n                    ),\n                    createSpan([], `Level/Rank: ${card.level}`),\n                ]\n            );\n            children.push(level);\n        } else if (card.linkMarkers != null) {\n            const linkMarkers = createDiv(\n                [\"card-tooltip__link-markers\"],\n                [\n                    createImg(\n                        [],\n                        \"https://ygoprodeck.com/wp-content/uploads/2019/04/link-arrow-right.png\"\n                    ),\n                    createSpan(\n                        [],\n                        `Link Markers: ${card.linkMarkers.join(\", \")}`\n                    ),\n                ]\n            );\n            children.push(linkMarkers);\n        }\n    }\n\n    children.push(createDescription(card));\n\n    children.push(createPrice(card));\n\n    return createDiv([\"card-tooltip__details__col\"], children);\n};\n\nconst createCardImageCol = (card: Card): HTMLElement => {\n    const cardImage = createImg(\n        [\"card-tooltip__image\"],\n        card.image?.url ?? \"#\"\n    );\n    return createDiv([\"card-tooltip__image__col\"], [cardImage]);\n};\n\nexport const createCardTooltip = (card: Card): HTMLElement =>\n    createDiv(\n        [\"card-tooltip\"],\n        [\n            createDiv(\n                [\"card-tooltip__content\"],\n                [createCardDetailsCol(card), createCardImageCol(card)]\n            ),\n        ]\n    );\n","import { tooltipContainer } from \"../inversify.config\";\nimport { TOOLTIP_TYPES } from \"../types\";\nconst cardService = tooltipContainer.get(TOOLTIP_TYPES.CardService);\nconst browserSupportsTouch = () => navigator.maxTouchPoints > 0;\nconst isHrefBlank = (target) => {\n    // We use this over HTMLAnchorElement.prototype.href as that returns the current URL if the value is empty.\n    const href = target.attributes.getNamedItem(\"href\")?.value;\n    return href == null || href === \"\";\n};\nexport const bindReferenceLink = (target, card) => {\n    if (!browserSupportsTouch() && // On touch devices binding a link causes issues with tooltips.\n        isHrefBlank(target) // If a link is set already, do not bind one.\n    ) {\n        target.href = cardService.getReferenceLink(card);\n        target.target = \"_blank\";\n    }\n};\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","export default function getBoundingClientRect(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height,\n    top: rect.top,\n    right: rect.right,\n    bottom: rect.bottom,\n    left: rect.left,\n    x: rect.left,\n    y: rect.top\n  };\n}","/*:: import type { Window } from '../types'; */\n\n/*:: declare function getWindow(node: Node | Window): Window; */\nexport default function getWindow(node) {\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView : window;\n  }\n\n  return node;\n}","import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}","import getWindow from \"./getWindow.js\";\n/*:: declare function isElement(node: mixed): boolean %checks(node instanceof\n  Element); */\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n/*:: declare function isHTMLElement(node: mixed): boolean %checks(node instanceof\n  HTMLElement); */\n\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nexport { isElement, isHTMLElement };","export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}","import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}","export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}","import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe: assume body is always available\n  return (isElement(element) ? element.ownerDocument : element.document).documentElement;\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}","import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}","import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}","import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\"; // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (!isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}","// Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\nexport default function getLayoutRect(element) {\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: element.offsetWidth,\n    height: element.offsetHeight\n  };\n}","import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// $FlowFixMe: this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || // DOM Element detected\n    // $FlowFixMe: need a better way to handle this...\n    element.host || // ShadowRoot detected\n    // $FlowFixMe: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}","import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}","import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nexport default function listScrollParents(element, list) {\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = getNodeName(scrollParent) === 'body';\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}","import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}","import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n}\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element); // Find the nearest non-table offsetParent\n\n  while (offsetParent && isTableElement(offsetParent)) {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static') {\n    return window;\n  }\n\n  return offsetParent || window;\n}","export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];","import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}","export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}","export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, {}, current, {\n      options: Object.assign({}, existing.options, {}, current.options),\n      data: Object.assign({}, existing.data, {}, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}","import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport getComputedStyle from \"./dom-utils/getComputedStyle.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport validateModifiers from \"./utils/validateModifiers.js\";\nimport uniqueBy from \"./utils/uniqueBy.js\";\nimport getBasePlacement from \"./utils/getBasePlacement.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nimport { auto } from \"./enums.js\";\nexport * from \"./enums.js\";\nvar INVALID_ELEMENT_ERROR = 'Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.';\nvar INFINITE_LOOP_ERROR = 'Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.';\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, {}, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(options) {\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, {}, state.options, {}, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        }); // Validate the provided modifiers so that the consumer will get warned\n        // if one of the modifiers is invalid for any reason\n\n        if (process.env.NODE_ENV !== \"production\") {\n          var modifiers = uniqueBy([].concat(orderedModifiers, state.options.modifiers), function (_ref) {\n            var name = _ref.name;\n            return name;\n          });\n          validateModifiers(modifiers);\n\n          if (getBasePlacement(state.options.placement) === auto) {\n            var flipModifier = state.orderedModifiers.find(function (_ref2) {\n              var name = _ref2.name;\n              return name === 'flip';\n            });\n\n            if (!flipModifier) {\n              console.error(['Popper: \"auto\" placements require the \"flip\" modifier be', 'present and enabled to work.'].join(' '));\n            }\n          }\n\n          var _getComputedStyle = getComputedStyle(popper),\n              marginTop = _getComputedStyle.marginTop,\n              marginRight = _getComputedStyle.marginRight,\n              marginBottom = _getComputedStyle.marginBottom,\n              marginLeft = _getComputedStyle.marginLeft; // We no longer take into account `margins` on the popper, and it can\n          // cause bugs with positioning, so we'll warn the consumer\n\n\n          if ([marginTop, marginRight, marginBottom, marginLeft].some(function (margin) {\n            return parseFloat(margin);\n          })) {\n            console.warn(['Popper: CSS \"margin\" styles cannot be used to apply padding', 'between the popper and its reference element or boundary.', 'To replicate margin, use the `offset` modifier, as well as', 'the `padding` option in the `preventOverflow` and `flip`', 'modifiers.'].join(' '));\n          }\n        }\n\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update  it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          if (process.env.NODE_ENV !== \"production\") {\n            console.error(INVALID_ELEMENT_ERROR);\n          }\n\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n        var __debug_loops__ = 0;\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (process.env.NODE_ENV !== \"production\") {\n            __debug_loops__ += 1;\n\n            if (__debug_loops__ > 100) {\n              console.error(INFINITE_LOOP_ERROR);\n              break;\n            }\n          }\n\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update  it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(INVALID_ELEMENT_ERROR);\n      }\n\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref3) {\n        var name = _ref3.name,\n            _ref3$options = _ref3.options,\n            options = _ref3$options === void 0 ? {} : _ref3$options,\n            effect = _ref3.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator();","import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};","import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}","export default function getVariation(placement) {\n  return placement.split('-')[1];\n}","export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}","import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) - Math.floor(reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = Math.floor(offsets[mainAxis]) + Math.ceil(reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}","import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};","import { top, left, right, bottom } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsets(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  var win = window;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: Math.round(x * dpr) / dpr || 0,\n    y: Math.round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive;\n\n  var _roundOffsets = roundOffsets(offsets),\n      x = _roundOffsets.x,\n      y = _roundOffsets.y;\n\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n    } // $FlowFixMe: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n    /*:: offsetParent = (offsetParent: Element); */\n\n\n    if (placement === top) {\n      sideY = bottom;\n      y -= offsetParent.clientHeight - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left) {\n      sideX = right;\n      x -= offsetParent.clientWidth - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) < 2 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref3) {\n  var state = _ref3.state,\n      options = _ref3.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive;\n\n  if (process.env.NODE_ENV !== \"production\") {\n    var transitionProperty = getComputedStyle(state.elements.popper).transitionProperty || '';\n\n    if (adaptive && ['transform', 'top', 'right', 'bottom', 'left'].some(function (property) {\n      return transitionProperty.indexOf(property) >= 0;\n    })) {\n      console.warn(['Popper: Detected CSS transitions on at least one of the following', 'CSS properties: \"transform\", \"top\", \"right\", \"bottom\", \"left\".', '\\n\\n', 'Disable the \"computeStyles\" modifier\\'s `adaptive` option to allow', 'for smooth transitions, or remove these properties from the CSS', 'transition declaration on the popper element if only transitioning', 'opacity or background-color for example.', '\\n\\n', 'We recommend using the popper element as a wrapper around an inner', 'element that can have any CSS property transitioned for animations.'].join(' '));\n    }\n  }\n\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, {}, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, {}, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};","import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      } // Flow doesn't support to extend this property, but it's the most\n      // effective way to apply styles to an HTMLElement\n      // $FlowFixMe\n\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\";\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};","var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}","var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}","import getWindow from \"./getWindow.js\";\nexport default function getViewportRect(element) {\n  var win = getWindow(element);\n  var visualViewport = win.visualViewport;\n  var width = win.innerWidth;\n  var height = win.innerHeight; // We don't know which browsers have buggy or odd implementations of this, so\n  // for now we're only applying it to iOS to fix the keyboard issue.\n  // Investigation required\n\n  if (visualViewport && /iPhone|iPod|iPad/.test(navigator.platform)) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: 0,\n    y: 0\n  };\n}","import getCompositeRect from \"./getCompositeRect.js\";\nimport getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getDocumentRect(element) {\n  var win = getWindow(element);\n  var winScroll = getWindowScroll(element);\n  var documentRect = getCompositeRect(getDocumentElement(element), win);\n  documentRect.height = Math.max(documentRect.height, win.innerHeight);\n  documentRect.width = Math.max(documentRect.width, win.innerWidth);\n  documentRect.x = -winScroll.scrollLeft;\n  documentRect.y = -winScroll.scrollTop;\n  return documentRect;\n}","import getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\n\nfunction toNumber(cssValue) {\n  return parseFloat(cssValue) || 0;\n}\n\nexport default function getBorders(element) {\n  var computedStyle = isHTMLElement(element) ? getComputedStyle(element) : {};\n  return {\n    top: toNumber(computedStyle.borderTopWidth),\n    right: toNumber(computedStyle.borderRightWidth),\n    bottom: toNumber(computedStyle.borderBottomWidth),\n    left: toNumber(computedStyle.borderLeftWidth)\n  };\n}","import getBorders from \"./getBorders.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getWindow from \"./getWindow.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\"; // Borders + scrollbars\n\nexport default function getDecorations(element) {\n  var win = getWindow(element);\n  var borders = getBorders(element);\n  var isHTML = getNodeName(element) === 'html';\n  var winScrollBarX = getWindowScrollBarX(element);\n  var x = element.clientWidth + borders.right;\n  var y = element.clientHeight + borders.bottom; // HACK:\n  // document.documentElement.clientHeight on iOS reports the height of the\n  // viewport including the bottom bar, even if the bottom bar isn't visible.\n  // If the difference between window innerHeight and html clientHeight is more\n  // than 50, we assume it's a mobile bottom bar and ignore scrollbars.\n  // * A 50px thick scrollbar is likely non-existent (macOS is 15px and Windows\n  //   is about 17px)\n  // * The mobile bar is 114px tall\n\n  if (isHTML && win.innerHeight - element.clientHeight > 50) {\n    y = win.innerHeight - borders.bottom;\n  }\n\n  return {\n    top: isHTML ? 0 : element.clientTop,\n    right: // RTL scrollbar (scrolling containers only)\n    element.clientLeft > borders.left ? borders.right : // LTR scrollbar\n    isHTML ? win.innerWidth - x - winScrollBarX : element.offsetWidth - x,\n    bottom: isHTML ? win.innerHeight - y : element.offsetHeight - y,\n    left: isHTML ? winScrollBarX : element.clientLeft\n  };\n}","export default function contains(parent, child) {\n  // $FlowFixMe: hasOwnProperty doesn't seem to work in tests\n  var isShadow = Boolean(child.getRootNode && child.getRootNode().host); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (isShadow) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}","export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}","import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDecorations from \"./getDecorations.js\";\nimport contains from \"./contains.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\n\nfunction getClientRectFromMixedType(element, clippingParent) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element)) : isHTMLElement(clippingParent) ? getBoundingClientRect(clippingParent) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(element);\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement);\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent);\n    var decorations = getDecorations(isHTMLElement(clippingParent) ? clippingParent : getDocumentElement(element));\n    accRect.top = Math.max(rect.top + decorations.top, accRect.top);\n    accRect.right = Math.min(rect.right - decorations.right, accRect.right);\n    accRect.bottom = Math.min(rect.bottom - decorations.bottom, accRect.bottom);\n    accRect.left = Math.max(rect.left + decorations.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}","export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}","import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), {}, paddingObject);\n}","export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}","import getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var referenceElement = state.elements.reference;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary);\n  var referenceClientRect = getBoundingClientRect(referenceElement);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, {}, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}","import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\n\n/*:: type OverflowsMap = { [ComputedPlacement]: number }; */\n\n/*;; type OverflowsMap = { [key in ComputedPlacement]: number }; */\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = (variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements).filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  }); // $FlowFixMe: Flow seems to have problems with two array unions...\n\n  var overflows = placements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}","import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases  research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};","export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}","export default function within(min, value, max) {\n  return Math.max(min, Math.min(value, max));\n}","import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport within from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = popperOffsets[mainAxis] + overflow[mainSide];\n    var max = popperOffsets[mainAxis] - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - tetherOffsetValue : minLen - arrowLen - arrowPaddingMin - tetherOffsetValue;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + tetherOffsetValue : maxLen + arrowLen + arrowPaddingMax + tetherOffsetValue;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = state.modifiersData.offset ? state.modifiersData.offset[state.placement][mainAxis] : 0;\n    var tetherMin = popperOffsets[mainAxis] + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = popperOffsets[mainAxis] + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? Math.min(min, tetherMin) : min, offset, tether ? Math.max(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var _preventedOffset = within(_min, _offset, _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};","import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport within from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = state.modifiersData[name + \"#persistent\"].padding;\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element,\n      _options$padding = options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!isHTMLElement(arrowElement)) {\n      console.error(['Popper: \"arrow\" element must be an HTMLElement (not an SVGElement).', 'To use an SVG arrow, wrap it in an HTMLElement that will be used as', 'the arrow.'].join(' '));\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    if (process.env.NODE_ENV !== \"production\") {\n      console.error(['Popper: \"arrow\" modifier\\'s `element` must be a child of the popper', 'element.'].join(' '));\n    }\n\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n  state.modifiersData[name + \"#persistent\"] = {\n    padding: mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements))\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};","import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};","import { popperGenerator } from \"./index.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow };","import { tooltipContainer } from \"../inversify.config\";\nimport { FindCardBy, getLogger, } from \"yugioh-deck-tool-core/src/main\";\nimport { TOOLTIP_TYPES } from \"../types\";\nimport { createCardTooltip, createErrorTooltip, createLoadingTooltip, } from \"./createCardTooltip\";\nimport { bindReferenceLink } from \"./bindReferenceLink\";\nimport { debounce } from \"lodash\";\nimport { createPopper } from \"@popperjs/core\";\nconst cardDatabase = tooltipContainer.get(TOOLTIP_TYPES.CardDatabase);\nconst cardDataLoaderService = tooltipContainer.get(TOOLTIP_TYPES.CardDataLoaderService);\nconst logger = getLogger(\"bindTooltip\");\nclass CardTooltip {\n    constructor(tooltipContainerElement) {\n        this.tooltipContainerElement = tooltipContainerElement;\n        this.tooltipElement = null;\n        this.popperInstance = null;\n    }\n    close() {\n        if (this.tooltipElement != null) {\n            this.tooltipElement.remove();\n            this.popperInstance?.destroy();\n        }\n    }\n    open(target, tooltip) {\n        this.close();\n        this.tooltipElement = tooltip;\n        this.popperInstance = createPopper(target, this.tooltipElement, {\n            placement: \"auto\",\n        });\n        this.tooltipContainerElement.appendChild(this.tooltipElement);\n    }\n}\nconst loadCard = async (cardKey) => {\n    let resolvedCardKey = await cardDatabase.prepareCard(cardKey, FindCardBy.NAME);\n    if (resolvedCardKey != null &&\n        cardDatabase.hasCard(resolvedCardKey, FindCardBy.NAME)) {\n        return cardDatabase.getCard(resolvedCardKey, FindCardBy.NAME);\n    }\n    resolvedCardKey = await cardDatabase.prepareCard(cardKey, FindCardBy.PASSCODE);\n    if (resolvedCardKey != null &&\n        cardDatabase.hasCard(resolvedCardKey, FindCardBy.PASSCODE)) {\n        return cardDatabase.getCard(resolvedCardKey, FindCardBy.PASSCODE);\n    }\n    throw new Error(`Could not find card '${cardKey}'.`);\n};\nexport const bindTooltipHandlers = (context, tooltipContainerElement) => {\n    const tooltip = new CardTooltip(tooltipContainerElement);\n    const openTooltip = (target, cardKey) => {\n        logger.trace(`Attempting to show tooltip for '${cardKey}'.`);\n        tooltip.open(target, createLoadingTooltip());\n        loadCard(cardKey)\n            .then((card) => {\n            logger.trace(\"Loaded card.\", card);\n            tooltip.open(target, createCardTooltip(card));\n            if (target instanceof HTMLAnchorElement) {\n                bindReferenceLink(target, card);\n            }\n            // Start request, but do not wait for it to finish.\n            cardDataLoaderService\n                .updateViews(card)\n                .then(() => logger.trace(\"Updated view count.\"))\n                .catch((e) => logger.warn(\"Could not update view count.\", e));\n        })\n            .catch((e) => {\n            tooltip.open(target, createErrorTooltip(\"Error while loading card.\"));\n            logger.error(\"Error while loading card.\", e);\n        });\n    };\n    const mouseOverHandler = (event) => {\n        const target = event.target;\n        if (target instanceof HTMLElement) {\n            const cardKey = target.dataset[\"name\"];\n            if (cardKey != null) {\n                openTooltip(target, cardKey);\n            }\n        }\n    };\n    const mouseOutHandler = () => tooltip.close();\n    context.addEventListener(\"mouseover\", debounce(mouseOverHandler, 200));\n    context.addEventListener(\"mouseout\", mouseOutHandler);\n};\n","import \"reflect-metadata\";\nimport { bindTooltipHandlers } from \"./tooltip/bindTooltip\";\nimport \"./styles/tooltip.scss\";\nimport { getLogger } from \"yugioh-deck-tool-core/src/main\";\nconst TOOLTIP_CONTAINER_ID = \"cardTooltipContainer\";\nconst logger = getLogger(\"tooltip\");\ndocument.addEventListener(\"readystatechange\", () => {\n    if (document.getElementById(TOOLTIP_CONTAINER_ID) == null) {\n        logger.debug(\"Setting up card tooltip.\");\n        const context = document.body;\n        const tooltipContainerElement = document.createElement(\"div\");\n        tooltipContainerElement.id = TOOLTIP_CONTAINER_ID;\n        context.appendChild(tooltipContainerElement);\n        bindTooltipHandlers(context, tooltipContainerElement);\n    }\n});\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n"],"sourceRoot":""}